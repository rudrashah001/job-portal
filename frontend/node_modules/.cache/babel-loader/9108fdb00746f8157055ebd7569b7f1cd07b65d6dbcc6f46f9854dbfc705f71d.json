{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/Rudra/.vscode/extensions/job-portal/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{createContext,useState,useEffect}from\"react\";import jwtDecode from\"jwt-decode\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const nav=useNavigate();// Load token on refresh\nuseEffect(()=>{const token=localStorage.getItem(\"token\");if(!token)return;\"\"(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\ntry {\\n  const decoded = jwtDecode(token);\\n  setUser({ id: decoded.sub, role: decoded.role });\\n} catch (err) {\\n  console.error(\\\"Invalid token:\\\", err);\\n  localStorage.removeItem(\\\"token\\\");\\n}\\n\"])))(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));},[]);// Handle login\nconst login=token=>{localStorage.setItem(\"token\",token);\"\"(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\nconst decoded = jwtDecode(token);\\nsetUser({ id: decoded.sub, role: decoded.role });\\n\\nif (decoded.role === \\\"recruiter\\\") {\\n  nav(\\\"/recruiter/dashboard\\\");\\n} else {\\n  nav(\\\"/student/dashboard\\\");\\n}\\n\"])))(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\"])));};// Handle logout\nconst logout=()=>{localStorage.removeItem(\"token\");setUser(null);nav(\"/\");};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});}","map":{"version":3,"names":["React","createContext","useState","useEffect","jwtDecode","useNavigate","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","nav","token","localStorage","getItem","_templateObject2","_taggedTemplateLiteral","_templateObject","login","setItem","_templateObject4","_templateObject3","logout","removeItem","Provider","value"],"sources":["C:/Users/Rudra/.vscode/extensions/job-portal/frontend/src/context/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\nconst [user, setUser] = useState(null);\r\nconst nav = useNavigate();\r\n\r\n// Load token on refresh\r\nuseEffect(() => {\r\nconst token = localStorage.getItem(\"token\");\r\nif (!token) return;\r\n\r\n```\r\ntry {\r\n  const decoded = jwtDecode(token);\r\n  setUser({ id: decoded.sub, role: decoded.role });\r\n} catch (err) {\r\n  console.error(\"Invalid token:\", err);\r\n  localStorage.removeItem(\"token\");\r\n}\r\n```\r\n\r\n}, []);\r\n\r\n// Handle login\r\nconst login = (token) => {\r\nlocalStorage.setItem(\"token\", token);\r\n\r\n```\r\nconst decoded = jwtDecode(token);\r\nsetUser({ id: decoded.sub, role: decoded.role });\r\n\r\nif (decoded.role === \"recruiter\") {\r\n  nav(\"/recruiter/dashboard\");\r\n} else {\r\n  nav(\"/student/dashboard\");\r\n}\r\n```\r\n\r\n};\r\n\r\n// Handle logout\r\nconst logout = () => {\r\nlocalStorage.removeItem(\"token\");\r\nsetUser(null);\r\nnav(\"/\");\r\n};\r\n\r\nreturn (\r\n<AuthContext.Provider value={{ user, login, logout }}>\r\n{children}\r\n</AuthContext.Provider>\r\n);\r\n}\r\n"],"mappings":"kOAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjE,MAAO,CAAAC,SAAS,KAAM,YAAY,CAClC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,MAAO,MAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAE1C,MAAO,SAAS,CAAAQ,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACzC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAAY,GAAG,CAAGT,WAAW,CAAC,CAAC,CAEzB;AACAF,SAAS,CAAC,IAAM,CAChB,KAAM,CAAAY,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,OAEZ,GAAAG,gBAAA,GAAAA,gBAAA,CAAAC,sBAAA,kNAAAC,eAAA,GAAAA,eAAA,CAAAD,sBAAA,SAUA,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAE,KAAK,CAAIN,KAAK,EAAK,CACzBC,YAAY,CAACM,OAAO,CAAC,OAAO,CAAEP,KAAK,CAAC,CAEpC,GAAAQ,gBAAA,GAAAA,gBAAA,CAAAJ,sBAAA,yNAAAK,gBAAA,GAAAA,gBAAA,CAAAL,sBAAA,SAWA,CAAC,CAED;AACA,KAAM,CAAAM,MAAM,CAAGA,CAAA,GAAM,CACrBT,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CAChCb,OAAO,CAAC,IAAI,CAAC,CACbC,GAAG,CAAC,GAAG,CAAC,CACR,CAAC,CAED,mBACAP,IAAA,CAACC,WAAW,CAACmB,QAAQ,EAACC,KAAK,CAAE,CAAEhB,IAAI,CAAES,KAAK,CAAEI,MAAO,CAAE,CAAAd,QAAA,CACpDA,QAAQ,CACa,CAAC,CAEvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}